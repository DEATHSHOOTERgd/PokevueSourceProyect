<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokevue</title>
    <!-- Page Icon -->
    <link rel="icon" href="/assets/icons/pokeball-icon.png">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://bootswatch.com/5/quartz/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Vue -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- Scripts -->
    <script src="/scripts/pokevue.js"></script>
    <script src="/scripts/colores.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="/css/pokevue.css">
    <link rel="stylesheet" href="/css/pokedex.css">
    <link rel="stylesheet" href="/css/fonts.css">
</head>
<body>
    <div id="pokevue">
        <div class="container col-10 align-items-center justify-content-center">
            <div class="poke-container">
                <h1>Pokevue</h1>
                <div id="pokedex-button">
                    <button class="" @click="resetPokedex()" data-bs-toggle="modal" data-bs-target="#pokedex">
                        <img src="/assets/icons/pokedex-icon.jpg" alt="Ã­cono de la pokedex">
                        <span>Open Pokedex</span>
                    </button>
                </div>
                <div class="container row">
                    <div v-for="(pokemon, index) in pokemons" @click="resetPokedex();searchPokemon(pokemon.id)" class="col-3 poke-card" data-bs-toggle="modal" data-bs-target="#pokedex">
                        <div class="card bg-secondary" v-bind:style="'background: radial-gradient(circle, white 0%,'+coloresDeTipo.get(pokemon.types[0].type.name)+' 100%);'">
                            <img class="pokemon-sprite" v-bind:src="getSpriteC(pokemon.sprites.other.home.front_default)" v-bind:alt="'imagen de '+ pokemon.forms[0].name">
                            <h2>{{pokemon.forms[0].name}}</h2>
                        </div>
                    </div>
                </div>
                <div class="controls col-12">
                    <button @click="lastPage()" class="btn" id="btn-mas"></button>
                    <span id="page-num">{{currentPage+1}}</span>
                    <button @click="nextPage()" class="btn" id="btn-menos"></button>
                </div>
            </div>
        </div>
        <div class="modal fade" id="pokedex" tabindex="-1" role="dialog" aria-labelledby="titulo" aria-hidden="true">
            <div class="modal-dialog modal-md" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="titulo">Pokedex</h2>
                        <button class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body" >
                        <div id="searcher" class="col-8 container">
                            <form ref="searcher" name="searcher" v-on:submit="searchPokemonByName">
                                <input ref="searchName" v-model="pokemonName" type="text" class="col-10" placeholder="Pokemon name...">
                                <button class="col-2"><span><img src="/assets/icons/search-svgrepo-com.svg" alt="search for a pokemon by its name"> </span></button>
                            </form>
                        </div>
                        <div id="marco" class=" container col-8 ">
                            <div id="imagen" v-bind:style="'background: radial-gradient(circle, white 0%,'+getColor()+' 100%);'">
                                <img v-bind:src="getSprite()" v-bind:alt="pokemon ? pokemon.forms[0].name:'imagen no encontrada'">
                            </div>  
                        </div>
                        <div class="estadisticas container col-8 ">
                            <h2 v-if="searchStatus=='not found'">Pokemon Not Found</h2>
                            <h2 v-if="searchStatus==''">Enter a pokemon name to search for it</h2>
                            <table class="container" v-if="pokemon">
                                <th colspan="2">#{{pokemon.id}} {{pokemon.name.toUpperCase()}}</th>
                                <tr>
                                    <td class="table-label">Type:</td><td>{{pokemon.types[0].type.name}}</td>
                                </tr>
                                <tr>
                                    <td class="table-label">Weight:</td><td>{{pokemon.weight/10}} kg</td>
                                </tr>
                                <tr>
                                    <td class="table-label">Base exp:</td><td>{{pokemon.base_experience}} exp</td>
                                </tr>
                                <tr>
                                    <td class="table-label">Height:</td><td>{{pokemon.height/10}} m</td>
                                </tr>
                                <tr>
                                    <td class="table-label">Ability:</td><td>{{pokemon.abilities[0].ability.name}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="container col-8" id="comment-section" v-if="pokemon">
                            <h3>Comment:</h3>
                            <form name="comment-box" id="comment-box" v-on:submit="performCommentOp">
                                <textarea @click="editComment()" v-model="comment.content" name="comment" id="comment" rows="3" ></textarea>
                                <input v-if="editing" id="comment-button" type="submit" v-bind:value="operation=='Add'?'Save comment':'Save changes'">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>